name: loanguard
type: web

# Build Configuration
build:
  type: buildpack
  builder: heroku/builder:22

# Service Configuration
service:
  ports:
    - port: 8080
      protocol: http
  routes:
    - path: /
      port: 8080
  run_command: uvicorn src.app:app --host 0.0.0.0 --port 8080
  
  # Environment Variables
  env:
    - key: PYTHONUNBUFFERED
      value: "1"
    - key: PORT
      value: "8080"

  # Health Check Configuration
  health_checks:
    - type: http
      path: /health
      port: 8080
      interval_seconds: 30
      timeout_seconds: 10
      healthy_threshold: 1
      unhealthy_threshold: 3

  # Instance Configuration (Free tier)
  instance_type: nano
  regions:
    - fra  # Frankfurt (closest to India for free tier)
  min_scale: 1
  max_scale: 1
